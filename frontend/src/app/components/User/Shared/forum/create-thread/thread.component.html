<div class="thread-container">
  <h2 class="thread-header">Create a New Thread</h2>
  <form [formGroup]="threadForm" (ngSubmit)="onSubmit()">
    <!-- Forum Type Dropdown -->
    <div class="form-group">
      <label for="forumType" class="form-label">Forum Type</label>
      <select formControlName="forumType" class="form-control" id="forumType">
        <option value="" disabled selected>
          Please select your forum type
        </option>
        <option *ngFor="let forumType of forumSections">
          {{ forumType.name }}
        </option>
      </select>
      <div
        *ngIf="
          threadForm.get('forumType')?.invalid &&
          threadForm.get('forumType')?.touched
        "
        class="error-message"
      >
        Forum Type is required.
      </div>
    </div>

    <!-- Title Field -->
    <div class="form-group">
      <label for="title" class="form-label">Title</label>
      <input
        type="text"
        formControlName="title"
        class="form-control"
        id="title"
        placeholder="Enter thread title"
      />
      <div
        *ngIf="
          threadForm.get('title')?.invalid && threadForm.get('title')?.touched
        "
        class="error-message"
      >
        Title is required and should be at least 3 characters.
      </div>
    </div>

    <!-- Description Field -->
    <div class="form-group">
      <label for="description" class="form-label">Description</label>
      <textarea
        formControlName="description"
        class="form-control"
        id="description"
        rows="4"
        placeholder="Enter thread description"
      ></textarea>
      <div
        *ngIf="
          threadForm.get('description')?.invalid &&
          threadForm.get('description')?.touched
        "
        class="error-message"
      >
        Description is required and should be at least 10 characters.
      </div>
    </div>

    <!-- Attachment Field -->
    <div class="form-group">
      <label for="attachment" class="form-label">Attachment (Optional)</label>
      <small class="form-hint">(Up to 3 attachments are allowed)</small>
      <input
        type="file"
        multiple
        class="form-control-file"
        id="attachment"
        (change)="onFileChange($event)"
      />
      <div *ngIf="attachmentError" class="error-message">
        Only 3 attachments are allowed.
      </div>
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      class="btn-submit"
      [disabled]="threadForm.invalid || attachmentError"
    >
      Submit
    </button>
  </form>
</div>


<div class="card flex justify-content-center gap-2">
  <p-toast />
</div>